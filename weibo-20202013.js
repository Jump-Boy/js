(this.webpackJsonpweibo=this.webpackJsonpweibo||[]).push([[0],{31:function(e,t,n){e.exports=n(60)},36:function(e,t,n){},38:function(e,t){!function(e){var t,n='<svg><symbol id="icon-like" viewBox="0 0 1024 1024"><path d="M512 284.3230811c-61.06984334-61.06984334-160.10202112-61.06984334-221.26895445 0-77.38102557 77.38102557-77.38102557 202.91887445 0 280.29990002l221.46313557 220.97768221 220.97768221-220.97768221c77.38102557-77.38102557 77.38102557-202.91887445 0-280.29990002-39.61287111-39.61287111-95.05147221-53.49679445-145.82973554-41.84594887" fill="#ff7272" ></path><path d="M868.51584 145.96930333c-66.60399445-66.60399445-161.17001443-93.78929778-253.11459555-72.62359666-20.87443001 4.8545189-33.98163001 25.63185778-29.12711112 46.60337778 4.75742777 20.87443001 25.63185778 33.88453888 46.60337778 29.1271111 65.63308999-15.14609778 133.20798777 4.27197667 180.78227001 51.84625778 99.80890112 99.80890112 99.80890112 262.144 0 361.95290112L512.3883611 863.95259221l-301.95105109-301.17432888c-99.80890112-99.80890112-99.80890112-262.144 0-361.95289999 75.53630777-75.53630777 198.54980779-75.53630777 274.08611556 0l66.99235555 67.38071666c7.67013888 7.76723001 75.14794667 74.17704334 144.66465109 74.17704334 1.74762667 0 3.59234333 0 5.33997113-0.09709113 29.32129223-1.45635555 55.05024-14.85482667 74.17704221-38.64196664a38.74876643 38.74876643 0 0 0-5.92251222-54.56478891 38.83614777 38.83614777 0 0 0-54.56478776 5.92251335c-6.50505443 8.15559111-12.23338667 9.51485667-17.47626667 9.70903666-28.83584 1.65053667-73.69159111-33.78744889-90.9736778-51.16662557l-67.18653553-67.67198777v-0.09708999c-105.82850333-105.82850333-278.06682112-105.82850333-383.99241558 0-130.10109667 130.10109667-130.10109667 341.66101333 0 471.76210887l329.42762667 328.65090446c7.57304889 7.57304889 17.47626667 11.35957333 27.47657557 11.35957334 9.90321778 0 19.90352555-3.78652445 27.47657444-11.35957334l328.65090332-328.65090446c129.90691555-129.90691555 129.90691555-341.56392334-0.09708999-471.56792888z" fill="#333333" ></path><path d="M240.63241443 413.45327445c-21.45697223 0-38.83614777-17.37917667-38.83614776-38.8361489 0-56.99204779 16.31118222-100.87689443 48.54518556-130.58654777 43.10812445-39.61287111 96.6049189-36.40888889 102.52743111-35.92343666 21.3598811 1.74762667 37.28270222 20.5831589 35.53507556 41.94304A38.73905778 38.73905778 0 0 1 346.94636999 285.58525667c-1.26217443 0-26.50567111-0.87381333-44.56448 16.11700111-15.24318777 14.36937443-22.91332779 38.9332389-22.91332665 72.91486777 0 21.3598811-17.37917667 38.83614777-38.83614891 38.8361489z" fill="#333333" ></path></symbol><symbol id="icon-comment" viewBox="0 0 1024 1024"><path d="M722.26133333 387.45429333c0-47.15861333-36.864-85.71562667-81.92-85.71562666H75.09333333v367.57504C75.09333333 716.44501333 111.95733333 755.02933333 157.01333333 755.02933333h81.92v165.25994667a27.77088 27.77088 0 0 0 32.08533334 28.23509333L307.2 910.67733333h3.74101333L391.85066667 826.02666667h3.14026666L462.848 755.02933333h259.41333333z" fill="#a3c3e1" ></path><path d="M861.52533333 162.47466667v505.17333333H425.49248l-25.8048 27.00629333L326.31466667 771.41333333v-103.76533333H162.47466667V162.47466667h699.05066666m5.46133334-87.38133334H157.01333333c-45.056 0-81.92 38.55701333-81.92 85.71562667v508.50474667C75.09333333 716.44501333 111.95733333 755.02933333 157.01333333 755.02933333h81.92v165.25994667A27.93472 27.93472 0 0 0 266.45845333 948.90666667a26.13248 26.13248 0 0 0 19.11466667-8.43776L462.848 755.02933333h404.13866667c45.056 0 81.92-38.55701333 81.92-85.68832V160.80896C948.90666667 113.65034667 912.04266667 75.09333333 866.98666667 75.09333333z" fill="#333333" ></path><path d="M315.392 375.46666667a43.69066667 43.69066667 0 1 0 43.69066667 43.69066666 43.69066667 43.69066667 0 0 0-43.69066667-43.69066666zM708.608 375.46666667a43.69066667 43.69066667 0 1 0 43.69066667 43.69066666 43.69066667 43.69066667 0 0 0-43.69066667-43.69066666zM512 375.46666667a43.69066667 43.69066667 0 1 0 43.69066667 43.69066666 43.69066667 43.69066667 0 0 0-43.69066667-43.69066666z" fill="#333333" ></path></symbol></svg>';if((t=document.getElementsByTagName("script"))[t.length-1].getAttribute("data-injectcss")&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(t){console&&console.log(t)}}!function(t){if(document.addEventListener)if(~["complete","loaded","interactive"].indexOf(document.readyState))setTimeout(t,0);else{document.addEventListener("DOMContentLoaded",(function e(){document.removeEventListener("DOMContentLoaded",e,!1),t()}),!1)}else document.attachEvent&&(a=t,s=e.document,r=!1,(o=function(){try{s.documentElement.doScroll("left")}catch(t){return void setTimeout(o,50)}n()})(),s.onreadystatechange=function(){"complete"==s.readyState&&(s.onreadystatechange=null,n())});function n(){r||(r=!0,a())}var a,s,r,o}((function(){var e,t,a,s,r,o;(e=document.createElement("div")).innerHTML=n,n=null,(t=e.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",a=t,(s=document.body).firstChild?(r=a,(o=s.firstChild).parentNode.insertBefore(r,o)):s.appendChild(a))}))}(window)},60:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(10),o=n.n(r),i=n(12),c=n(13),l=n(16),u=n(14),d=n(17),m=n(29),h=(n(36),function(){return s.a.createElement("div",{className:"is-initing"},s.a.createElement("i",{className:"is-loader"}),s.a.createElement("p",{className:"is-initing-text"},"\u52a0\u8f7d\u4e2d..."))}),f=(n(37),n(38),n(63)),p=n(65),g=n(30),v=n(64),b=function(e){var t="\u51fa\u9519\u4fe1\u606f: ";return e.response&&e.response.data&&e.response.data.message?(t+="".concat(e.response.data.message,". "),e.response.data.errors&&(t+=e.response.data.errors.map((function(e){return e.message})).join(", "))):t+=e.message,t.includes("Network")||t.includes("timeout")?"\u52a0\u8f7d\u5931\u8d25\uff0c\u9605\u8bfb\u5fae\u535a\u9700\u8981\u7ffb\u5899\u54e6~":t.includes("rate limit exceeded")?"\u5fae\u535a\u63a5\u53e3\u5df2\u88ab\u8bf7\u6c42\u7206\u4e86\uff0c\u8bf7\u8fc7\u4e00\u4f1a\u518d\u6765\u5427~":t},y=function(e){return 0===e.length?{name:"\ud83c\udfa8\u5176\u4ed6",color:"999"}:{name:e[0].name,color:e[0].color}},E=function(e){return e.map((function(e){var t=e.createdAt,n=e.bodyHTML,a=e.url,s=e.comments.totalCount,r=e.reactions.totalCount,o=e.labels;return{createdAt:t,bodyHTML:n,url:a,comment:s,reaction:r,label:y(o.nodes)}}))},w=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.forwardedRef,a=t.issue;return s.a.createElement("div",{className:"is-issue",ref:n},s.a.createElement("div",{className:"is-issue-content"},s.a.createElement("div",{className:"is-issue-header"},s.a.createElement("span",{className:"is-issue-label",style:{backgroundColor:"#".concat(a.label.color),color:(e=a.label.color,(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=128?"black":"white")}},a.label.name),s.a.createElement("span",{className:"is-issue-username"},"SimonAking"),s.a.createElement("span",{className:"is-issue-text"}),s.a.createElement("span",{className:"is-issue-date"},function(e){var t=new Date(e),n=new Date,a=Object(f.a)(t,n,{addSuffix:!0,locale:v.a});return a.includes("\u79d2")||a.includes("\u5206\u949f")?a:a.includes("\u5c0f\u65f6")||a.includes("\u6628\u5929")?Object(p.a)(t,n,{locale:v.a}):a.includes("\u5929")?a:Object(g.a)(t,"yyyy-MM-dd",{locale:v.a})}(a.createdAt))),s.a.createElement("div",{className:"is-issue-body markdown-body",dangerouslySetInnerHTML:{__html:a.bodyHTML}}),s.a.createElement("div",{className:"is-issue-footer"},s.a.createElement("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"is-issue-icon is-issue-heart"},s.a.createElement("svg",{className:"is-icon","aria-hidden":"true"},s.a.createElement("use",{xlinkHref:"#icon-like"})),a.reaction),s.a.createElement("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"is-issue-icon"},s.a.createElement("svg",{className:"is-icon","aria-hidden":"true"},s.a.createElement("use",{xlinkHref:"#icon-comment"})),a.comment))))}}]),t}(a.Component),N=n(27),O=(n(42),function(e){var t=e.onClick;return s.a.createElement(N.AwesomeButtonProgress,{type:"secondary",size:"medium",loadingLabel:"\u52a0\u8f7d\u4e2d...",resultLabel:"\u52a0\u8f7d\u6210\u529f",action:function(e,n){t(n)}},"\u52a0\u8f7d\u66f4\u591a")}),k=n(28),L=n.n(k),M=function(e){return null===e.cursor&&delete e.cursor,{operationName:"getIssues",query:"\n  query getIssues($owner: String!, $repo: String!, $cursor: String, $pageSize: Int!) {\n    repository(owner: $owner, name: $repo) {\n      issues(first: $pageSize, after: $cursor, orderBy: {field: CREATED_AT, direction: DESC}, filterBy: {createdBy: $owner, states: OPEN}) {\n        pageInfo {\n          hasNextPage\n          endCursor\n        }\n        nodes {\n          createdAt\n          bodyHTML\n          url\n          comments(first: 1) {\n            totalCount\n          }\n          reactions(first: 1) {\n            totalCount\n          }\n          labels(first: 1) {\n            nodes {\n              name\n              color\n            }\n          }\n        }\n      }\n    }\n  }\n  ",variables:e}},C=function(e){function t(){var e,n;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={issues:[],cursor:null,isIniting:!0,isLoadOver:!1,isOccurError:!1,errorMsg:""},e.getIssues=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.handleError,a=e.state,s=a.cursor,r=a.issues,o=e.options,i=o.owner,c=o.repo,l=o.pageSize;return e.http.post("/graphql",M({owner:i,repo:c,cursor:s,pageSize:l})).then((function(t){var n=t.data.data.repository.issues,a=n.pageInfo,s=a.hasNextPage,o=a.endCursor,i=E(n.nodes);e.setState({isLoadOver:!s,cursor:o,issues:r.concat(i)})})).then(t).catch(n)},e.getMoreIssues=function(t){e.getIssues((function(){t(),e.anchor.current.scrollIntoView({behavior:"smooth",block:"start"})}),(function(n){t(!1,"\u52a0\u8f7d\u5931\u8d25"),e.handleError(n)}))},e.handleError=function(t){console.log("err:",t),e.setState({isIniting:!1,isOccurError:!0,errorMsg:b(t)})},e.options=window.WEIBO,e.http=(n=e.options.token,L.a.create({baseURL:"https://api.github.com/",timeout:5e3,headers:{Accept:"application/json",Authorization:"bearer ".concat(n.join(""))}})),e.anchor=s.a.createRef(),e.getIssues((function(){return e.setState({isIniting:!1})})),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"issues",value:function(){var e=this,t=this.state,n=t.issues,a=t.isLoadOver,r=this.options,o=r.animation,i=r.pageSize,c=n.concat([]);return s.a.createElement("div",{className:"is-issues",key:"issues"},s.a.createElement(m.a,o,c.map((function(t,n){return s.a.createElement(w,Object.assign({issue:t,key:n},(n+1)%i===1&&c.length-(n+1)<i&&{forwardedRef:e.anchor}))}))),!a&&c.length&&s.a.createElement("div",{className:"is-issues-controls"},s.a.createElement(O,{onClick:this.getMoreIssues})))}},{key:"render",value:function(){var e=this.state,t=e.isIniting,n=e.isOccurError,a=e.errorMsg;return s.a.createElement("div",{className:"is-container"},t&&s.a.createElement(h,null),n&&s.a.createElement("div",{className:"is-error"}," ",a," "),!t&&!n&&this.issues())}}]),t}(a.Component);o.a.render(s.a.createElement(C,null),document.getElementById("weibo-container"))}},[[31,1,2]]]);
//# sourceMappingURL=main.bbdeafe5.chunk.js.map
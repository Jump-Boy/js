"use strict";((void 0).webpackJsonpweibo=(void 0).webpackJsonpweibo||[]).push([[0],{31:function(e,t,n){e.exports=n(60)},36:function(){},38:function(){!function(e){var t,n,a,s,r,o,i='<svg><symbol id="icon-like" viewBox="0 0 1024 1024"><path d="M512 284.3230811c-61.06984334-61.06984334-160.10202112-61.06984334-221.26895445 0-77.38102557 77.38102557-77.38102557 202.91887445 0 280.29990002l221.46313557 220.97768221 220.97768221-220.97768221c77.38102557-77.38102557 77.38102557-202.91887445 0-280.29990002-39.61287111-39.61287111-95.05147221-53.49679445-145.82973554-41.84594887" fill="#ff7272" ></path><path d="M868.51584 145.96930333c-66.60399445-66.60399445-161.17001443-93.78929778-253.11459555-72.62359666-20.87443001 4.8545189-33.98163001 25.63185778-29.12711112 46.60337778 4.75742777 20.87443001 25.63185778 33.88453888 46.60337778 29.1271111 65.63308999-15.14609778 133.20798777 4.27197667 180.78227001 51.84625778 99.80890112 99.80890112 99.80890112 262.144 0 361.95290112L512.3883611 863.95259221l-301.95105109-301.17432888c-99.80890112-99.80890112-99.80890112-262.144 0-361.95289999 75.53630777-75.53630777 198.54980779-75.53630777 274.08611556 0l66.99235555 67.38071666c7.67013888 7.76723001 75.14794667 74.17704334 144.66465109 74.17704334 1.74762667 0 3.59234333 0 5.33997113-0.09709113 29.32129223-1.45635555 55.05024-14.85482667 74.17704221-38.64196664a38.74876643 38.74876643 0 0 0-5.92251222-54.56478891 38.83614777 38.83614777 0 0 0-54.56478776 5.92251335c-6.50505443 8.15559111-12.23338667 9.51485667-17.47626667 9.70903666-28.83584 1.65053667-73.69159111-33.78744889-90.9736778-51.16662557l-67.18653553-67.67198777v-0.09708999c-105.82850333-105.82850333-278.06682112-105.82850333-383.99241558 0-130.10109667 130.10109667-130.10109667 341.66101333 0 471.76210887l329.42762667 328.65090446c7.57304889 7.57304889 17.47626667 11.35957333 27.47657557 11.35957334 9.90321778 0 19.90352555-3.78652445 27.47657444-11.35957334l328.65090332-328.65090446c129.90691555-129.90691555 129.90691555-341.56392334-0.09708999-471.56792888z" fill="#333333" ></path><path d="M240.63241443 413.45327445c-21.45697223 0-38.83614777-17.37917667-38.83614776-38.8361489 0-56.99204779 16.31118222-100.87689443 48.54518556-130.58654777 43.10812445-39.61287111 96.6049189-36.40888889 102.52743111-35.92343666 21.3598811 1.74762667 37.28270222 20.5831589 35.53507556 41.94304A38.73905778 38.73905778 0 0 1 346.94636999 285.58525667c-1.26217443 0-26.50567111-0.87381333-44.56448 16.11700111-15.24318777 14.36937443-22.91332779 38.9332389-22.91332665 72.91486777 0 21.3598811-17.37917667 38.83614777-38.83614891 38.8361489z" fill="#333333" ></path></symbol><symbol id="icon-comment" viewBox="0 0 1024 1024"><path d="M722.26133333 387.45429333c0-47.15861333-36.864-85.71562667-81.92-85.71562666H75.09333333v367.57504C75.09333333 716.44501333 111.95733333 755.02933333 157.01333333 755.02933333h81.92v165.25994667a27.77088 27.77088 0 0 0 32.08533334 28.23509333L307.2 910.67733333h3.74101333L391.85066667 826.02666667h3.14026666L462.848 755.02933333h259.41333333z" fill="#a3c3e1" ></path><path d="M861.52533333 162.47466667v505.17333333H425.49248l-25.8048 27.00629333L326.31466667 771.41333333v-103.76533333H162.47466667V162.47466667h699.05066666m5.46133334-87.38133334H157.01333333c-45.056 0-81.92 38.55701333-81.92 85.71562667v508.50474667C75.09333333 716.44501333 111.95733333 755.02933333 157.01333333 755.02933333h81.92v165.25994667A27.93472 27.93472 0 0 0 266.45845333 948.90666667a26.13248 26.13248 0 0 0 19.11466667-8.43776L462.848 755.02933333h404.13866667c45.056 0 81.92-38.55701333 81.92-85.68832V160.80896C948.90666667 113.65034667 912.04266667 75.09333333 866.98666667 75.09333333z" fill="#333333" ></path><path d="M315.392 375.46666667a43.69066667 43.69066667 0 1 0 43.69066667 43.69066666 43.69066667 43.69066667 0 0 0-43.69066667-43.69066666zM708.608 375.46666667a43.69066667 43.69066667 0 1 0 43.69066667 43.69066666 43.69066667 43.69066667 0 0 0-43.69066667-43.69066666zM512 375.46666667a43.69066667 43.69066667 0 1 0 43.69066667 43.69066666 43.69066667 43.69066667 0 0 0-43.69066667-43.69066666z" fill="#333333" ></path></symbol></svg>';if((t=document.getElementsByTagName("script"))[t.length-1].getAttribute("data-injectcss")&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(t){console&&console.log(t)}}function c(){r||(r=!0,a())}n=function(){var e,t,n,a,s;(e=document.createElement("div")).innerHTML=i,i=null,(t=e.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",n=t,(a=document.body).firstChild?(s=a.firstChild).parentNode.insertBefore(n,s):a.appendChild(n))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(n,0):document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),n()},!1):document.attachEvent&&(a=n,s=e.document,r=!1,(o=function(){try{s.documentElement.doScroll("left")}catch(e){return void setTimeout(o,50)}c()})(),s.onreadystatechange=function(){"complete"==s.readyState&&(s.onreadystatechange=null,c())})}(window)},60:function(e,t,n){n.r(t);function d(e){return e.map(function(e){var t,n=e.createdAt,a=e.bodyHTML,s=e.url,r=e.comments.totalCount,o=e.reactions.totalCount,i=e.labels;return{createdAt:n,bodyHTML:a,url:s,comment:r,reaction:o,label:0===(t=i.nodes).length?{name:"🎨其他",color:"999"}:{name:t[0].name,color:t[0].color}}})}var a,s,r=n(0),c=n.n(r),o=n(10),i=n.n(o),l=n(12),u=n(13),m=n(16),h=n(14),p=n(17),f=n(29),g=(n(36),function(){return c.a.createElement("div",{className:"is-initing"},c.a.createElement("i",{className:"is-loader"}),c.a.createElement("p",{className:"is-initing-text"},"加载中..."))}),v=(n(37),n(38),n(63)),b=n(65),y=n(30),E=n(64),w=(s=r.Component,Object(p.a)(I,s),Object(u.a)(I,[{key:"render",value:function(){var e,t,n,a,s,r=this.props,o=r.forwardedRef,i=r.issue;return c.a.createElement("div",{className:"is-issue",ref:o},c.a.createElement("div",{className:"is-issue-content"},c.a.createElement("div",{className:"is-issue-header"},c.a.createElement("span",{className:"is-issue-label",style:{backgroundColor:"#".concat(i.label.color),color:(e=i.label.color,128<=(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3?"black":"white")}},i.label.name),c.a.createElement("span",{className:"is-issue-username"},"SimonAking"),c.a.createElement("span",{className:"is-issue-text"}),c.a.createElement("span",{className:"is-issue-date"},(t=i.createdAt,n=new Date(t),a=new Date,(s=Object(v.a)(n,a,{addSuffix:!0,locale:E.a})).includes("秒")||s.includes("分钟")?s:s.includes("小时")||s.includes("昨天")?Object(b.a)(n,a,{locale:E.a}):s.includes("天")?s:Object(y.a)(n,"yyyy-MM-dd",{locale:E.a})))),c.a.createElement("div",{className:"is-issue-body markdown-body",dangerouslySetInnerHTML:{__html:i.bodyHTML}}),c.a.createElement("div",{className:"is-issue-footer"},c.a.createElement("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"is-issue-icon is-issue-heart"},c.a.createElement("svg",{className:"is-icon","aria-hidden":"true"},c.a.createElement("use",{xlinkHref:"#icon-like"})),i.reaction),c.a.createElement("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"is-issue-icon"},c.a.createElement("svg",{className:"is-icon","aria-hidden":"true"},c.a.createElement("use",{xlinkHref:"#icon-comment"})),i.comment))))}}]),I),N=n(27),O=(n(42),function(e){var n=e.onClick;return c.a.createElement(N.AwesomeButtonProgress,{type:"secondary",size:"medium",loadingLabel:"加载中...",resultLabel:"加载成功",action:function(e,t){n(t)}},"加载更多")}),k=n(28),L=n.n(k),M=(a=r.Component,Object(p.a)(C,a),Object(u.a)(C,[{key:"issues",value:function(){var n=this,e=this.state,t=e.issues,a=e.isLoadOver,s=this.options,r=s.animation,o=s.pageSize,i=t.concat([]);return c.a.createElement("div",{className:"is-issues",key:"issues"},c.a.createElement(f.a,r,i.map(function(e,t){return c.a.createElement(w,Object.assign({issue:e,key:t},(t+1)%o==1&&i.length-(t+1)<o&&{forwardedRef:n.anchor}))})),!a&&i.length&&c.a.createElement("div",{className:"is-issues-controls"},c.a.createElement(O,{onClick:this.getMoreIssues})))}},{key:"render",value:function(){var e=this.state,t=e.isIniting,n=e.isOccurError,a=e.errorMsg;return c.a.createElement("div",{className:"is-container"},t&&c.a.createElement(g,null),n&&c.a.createElement("div",{className:"is-error"}," ",a," "),!t&&!n&&this.issues())}}]),C);function C(){var u,e;return Object(l.a)(this,C),(u=Object(m.a)(this,Object(h.a)(C).call(this))).state={issues:[],cursor:null,isIniting:!0,isLoadOver:!1,isOccurError:!1,errorMsg:""},u.getIssues=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:u.handleError,a=u.state,s=a.cursor,o=a.issues,r=u.options,i=r.owner,c=r.repo,l=r.pageSize;return u.http.post("/graphql",(null===(e={owner:i,repo:c,cursor:s,pageSize:l}).cursor&&delete e.cursor,{operationName:"getIssues",query:"\n  query getIssues($owner: String!, $repo: String!, $cursor: String, $pageSize: Int!) {\n    repository(owner: $owner, name: $repo) {\n      issues(first: $pageSize, after: $cursor, orderBy: {field: CREATED_AT, direction: DESC}, filterBy: {createdBy: $owner, states: OPEN}) {\n        pageInfo {\n          hasNextPage\n          endCursor\n        }\n        nodes {\n          createdAt\n          bodyHTML\n          url\n          comments(first: 1) {\n            totalCount\n          }\n          reactions(first: 1) {\n            totalCount\n          }\n          labels(first: 1) {\n            nodes {\n              name\n              color\n            }\n          }\n        }\n      }\n    }\n  }\n  ",variables:e})).then(function(e){var t=e.data.data.repository.issues,n=t.pageInfo,a=n.hasNextPage,s=n.endCursor,r=d(t.nodes);u.setState({isLoadOver:!a,cursor:s,issues:o.concat(r)})}).then(t).catch(n)},u.getMoreIssues=function(t){u.getIssues(function(){t(),u.anchor.current.scrollIntoView({behavior:"smooth",block:"start"})},function(e){t(!1,"加载失败"),u.handleError(e)})},u.handleError=function(e){var t,n;console.log("err:",e),u.setState({isIniting:!1,isOccurError:!0,errorMsg:(n="出错信息: ",(t=e).response&&t.response.data&&t.response.data.message?(n+="".concat(t.response.data.message,". "),t.response.data.errors&&(n+=t.response.data.errors.map(function(e){return e.message}).join(", "))):n+=t.message,n.includes("Network")||n.includes("timeout")?"加载失败，阅读微博需要翻墙哦~":n.includes("rate limit exceeded")?"微博接口已被请求爆了，请过一会再来吧~":n)})},u.options=window.WEIBO,u.http=(e=u.options.token,L.a.create({baseURL:"https://api.github.com/",timeout:8e3,headers:{Accept:"application/json",Authorization:"Bearer ".concat(e)}})),u.anchor=c.a.createRef(),u.getIssues(function(){return u.setState({isIniting:!1})}),u}function I(){return Object(l.a)(this,I),Object(m.a)(this,Object(h.a)(I).apply(this,arguments))}i.a.render(c.a.createElement(M,null),document.getElementById("weibo-container"))}},[[31,1,2]]]);